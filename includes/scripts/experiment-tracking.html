<script>(()=>{
// requires scripts/namespace

const experimentRecordName = "experiments";

adblock.getExperimentStore = function getExperimentStore() {
  const experimentRecord = localStorage.getItem(experimentRecordName);
  if (typeof experimentRecord == "string" && experimentRecord.length > 0) {
    return JSON.parse(experimentRecord);
  } else {
    return {};
  }
};

adblock.storeExperiment = function storeExperiment(experiment, variant) {
  const experimentStore = adblock.getExperimentStore();
  experimentStore[experiment ?? adblock.experiment] = variant ?? adblock.variant;
  localStorage.setItem(experimentRecordName, JSON.stringify(experimentStore));
};

adblock.setExperiment = function setExperiment({experiment, variant}) {
  adblock.experiment = experiment;
  adblock.variant = variant;
  adblock.storeExperiment();
};

adblock.formatExperimentRecord = function formatExperimentRecord(experimentStore) {
  return Object.entries(experimentStore).map((entry) => entry.join("|")).join(",");
};

})()</script>