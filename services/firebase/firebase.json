{
  "hosting": {
    "public": "public",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**",
      "utils",
      "prebuild_staging.mjs"
    ],
    "cleanUrls": true,
    "i18n": {
      "root": "/"
    },
    "redirects": [
      {
        "regex": "(?i)^/([a-z]{2}/)?([a-z]{2}[-]{1}[a-z]{2}/)?(up-to-date|update-2309|contribution|donate)/?$",
        "destination": "/update",
        "type": 301
      },
      {
        "regex": "(?i)^/([a-z]{2}/)?([a-z]{2}[-]{1}[a-z]{2}/)?(android|chrome|edge|firefox|internet-expolorer|opera|yandex-browser|safari)/?$",
        "destination": "/",
        "type": 301
      },
      {
        "regex": "(?i)^/downloads/(.*)",
        "destination": "https://downloads.adblockplus.org/$1",
        "type": 301
      },
      {
        "regex": "(?i)^/update.rdf$",
        "destination": "https://update.adblockplus.org/gecko/update.rdf",
        "type": 301
      },
      {
        "regex": "(?i)^/updates.plist$",
        "destination": "https://update.adblockplus.org/adblockplussafari/updates.plist",
        "type": 301
      },
      {
        "regex": "(?i)^/androidupdate.json$",
        "destination": "https://update.adblockplus.org/adblockplusandroid/update.json",
        "type": 301
      },
      {
        "regex": "(?i)^/androidupdates.xml$",
        "destination": "https://update.adblockplus.org/adblockplusandroid/updates.xml",
        "type": 301
      },
      {
        "regex": "(?i)^/ieupdate.json$",
        "destination": "https://update.adblockplus.org/adblockplusie/update.json",
        "type": 301
      },
      {
        "regex": "(?i)^/([a-z]{2}/)?([a-z]{2}[-]{1}[a-z]{2}/)?adblock-browser/?$",
        "destination": "https://adblockbrowser.org/",
        "type": 301
      },
      {
        "regex": "(?i)^/devbuilds/?$",
        "destination": "/development-builds",
        "type": 301
      },
      {
        "regex": "(?i)^/(devbuilds/(.*)?)",
        "destination": "https://downloads.adblockplus.org/:1",
        "type": 302
      },
      {
        "regex": "(?i)^/([a-z]{2}/)?([a-z]{2}[-]{1}[a-z]{2}/)?poland/?$",
        "destination": "/",
        "type": 301
      },
      {
        "regex": "(?i)^/de/ad-blocker-safari/?$",
        "destination": "/de/",
        "type": 301
      },
      {
        "regex": "(?i)^/fr/ad-blocker-safari/?$",
        "destination": "/fr/",
        "type": 301
      },
      {
        "regex": "(?i)^/([a-z]{2}/)?([a-z]{2}[-]{1}[a-z]{2}/)?filters/?$",
        "destination": "https://help.adblockplus.org/hc/articles/360062733293",
        "type": 301
      },
      {
        "regex": "(?i)^/([a-z]{2}/)?([a-z]{2}[-]{1}[a-z]{2}/)?android-about/?$",
        "destination": "/",
        "type": 301
      },
      {
        "regex": "(?i)^/([a-z]{2}/)?([a-z]{2}[-]{1}[a-z]{2}/)?careers/?$",
        "destination": "https://adblock.pinpointhq.com/en#js-careers-jobs-block",
        "type": 301
      },
      {
        "regex": "(?i)^/(blog|releases|development-builds|atom|rss|category|section|author|file_download|images|textpattern)($|/)",
        "destination": "https://blog.adblockplus.org/:1",
        "type": 301
      },
      {
        "regex": "(?i)^/forum($|/.*)",
        "destination": "https://forum.adblockplus.org/:1",
        "type": 301
      },
      {
        "source": "/js/payment/config/load.js",
        "destination": "/payment-config-function",
        "type": 301
      },
      {
        "source": "/robots.txt",
        "destination": "/robots-function",
        "type": 302
      },
      {
        "regex": "(?i)^/([a-z]{2}/)?([a-z]{2}[-]{1}[a-z]{2}/)?deal/?",
        "destination": "https://accounts.adblockplus.org/premium",
        "type": 302
      }
    ],
    "rewrites": [
      {
        "source": "/payment-config-function",
        "run": {
          "serviceId": "AUTOMATICALLY_REPLACED_BY_BUILD",
          "region": "europe-west1"
        }
      },
      {
        "source": "/robots-function",
        "run": {
          "serviceId": "AUTOMATICALLY_REPLACED_BY_BUILD",
          "region": "europe-west1"
        }
      },
      {
        "source": "/url",
        "run": {
          "serviceId": "AUTOMATICALLY_REPLACED_BY_BUILD",
          "region": "europe-west1"
        }
      },
      {
        "source": "/currency",
        "run": {
          "serviceId": "AUTOMATICALLY_REPLACED_BY_BUILD",
          "region": "europe-west1"
        }
      },
      {
        "source": "/update-function/:language?",
        "run": {
          "serviceId": "AUTOMATICALLY_REPLACED_BY_BUILD",
          "region": "europe-west1"
        }
      },
      {
        "source": "/installed-function/:language?",
        "run": {
          "serviceId": "AUTOMATICALLY_REPLACED_BY_BUILD",
          "region": "europe-west1"
        }
      },
      {
        "source": "/redirect",
        "run": {
          "serviceId": "AUTOMATICALLY_REPLACED_BY_BUILD",
          "region": "europe-west1"
        }
      },
      // IMPORTANT: Fallback locale rerouting function, must stay at bottom of "rewrites" array
      // Refd #943 - URLs containing non-exact matching locale paths return a 404
      {
        "regex": "(?i)^/([\\w-]{2,6})(/.*)?$",
        "run": {
          "serviceId": "AUTOMATICALLY_REPLACED_BY_BUILD",
          "region": "europe-west1"
        }
      }
    ],

    "headers": [
      {
        "source": "**",
        "headers": [
          {
            "key": "X-Frame-Options",
            "value": "sameorigin"
          }
        ]
      },
      {
        "source": "js/settings.js",
        "headers": [
          {
            "key": "Cache-Control",
            "value": "no-cache"
          }
        ]
      }
    ]
  }
}
